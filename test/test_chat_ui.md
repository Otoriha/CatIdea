# チャットUI機能の動作テスト手順

## 前提条件
- Docker環境が起動していること
- フロントエンド: http://localhost:3001
- バックエンドAPI: http://localhost:3000

## テスト手順

### 1. 初期設定
1. ブラウザで http://localhost:3001 にアクセス
2. ログインまたは新規登録を行う
3. ペインポイントが登録されていない場合は、新規作成する

### 2. チャット機能のテスト

#### 2.1 チャット開始
1. ペインポイント一覧から任意のペインポイントを選択
2. 詳細ページの「AIと会話を開始」ボタンをクリック
3. チャットコンテナが表示されることを確認

#### 2.2 WebSocket接続確認
1. チャットヘッダーに「接続中」と表示されることを確認
2. ブラウザの開発者ツール > Network > WSタブでWebSocket接続を確認

#### 2.3 メッセージ送信
1. メッセージ入力欄に「このペインポイントについて詳しく教えてください」と入力
2. Enterキーまたは送信ボタンをクリック
3. 以下を確認：
   - ユーザーメッセージが即座に表示される
   - タイピングインジケーター（3点アニメーション）が表示される
   - AIからの応答がストリーミング形式で表示される
   - 応答完了後、タイピングインジケーターが消える

#### 2.4 メッセージ表示
1. ユーザーメッセージ：青色の吹き出し（右寄せ）
2. AIメッセージ：グレーの吹き出し（左寄せ）
3. 各メッセージにタイムスタンプが表示される
4. AIメッセージにコスト情報が表示される

#### 2.5 連続送信
1. 複数のメッセージを連続して送信
2. 自動スクロールが機能することを確認
3. 送信中は入力欄が無効化されることを確認

#### 2.6 エラーハンドリング
1. ネットワークを切断してメッセージを送信
2. エラーメッセージが表示されることを確認
3. 接続ステータスが「切断」に変わることを確認

#### 2.7 チャット終了と再開
1. チャット右上の×ボタンをクリック
2. チャットが非表示になることを確認
3. 再度「AIと会話を開始」をクリック
4. 同じ会話が継続されることを確認

## 確認ポイントチェックリスト
- [ ] WebSocket接続が確立される
- [ ] メッセージの送受信が正常に動作する
- [ ] ストリーミングレスポンスが表示される
- [ ] タイピングインジケーターが表示される
- [ ] 自動スクロールが機能する
- [ ] Enterキーでメッセージが送信される
- [ ] メッセージ送信中は入力が無効化される
- [ ] エラー時に適切なメッセージが表示される
- [ ] コスト情報が表示される
- [ ] レスポンシブデザインが機能する

## 既知の問題・注意事項
- 初回接続時に若干の遅延が発生する場合がある
- OpenAI APIキーが設定されていない場合、エラーが発生する
- 月額上限（$10）に達した場合、メッセージ送信が制限される